{
  "version": "1.28",
  "file_type": "messages.xml",
  "description": "Sch√©ma de validation pour messages.xml DayZ 1.28 - Messages automatiques serveur",
  "last_updated": "2025-01-30",
  
  "structure": {
    "root_element": "messages",
    "child_element": "message",
    "multiple_children": true
  },
  
  "message_element": {
    "children": {
      "text": {
        "required": true,
        "type": "string",
        "description": "Contenu du message √† afficher",
        "placeholders": {
          "#name": "Nom du serveur",
          "#tmin": "Temps restant en minutes (avec deadline)",
          "#tsec": "Temps restant en secondes (avec deadline)"
        }
      },
      "delay": {
        "required": false,
        "type": "integer",
        "min": 0,
        "max": 1440,
        "description": "D√©lai avant affichage (minutes)"
      },
      "repeat": {
        "required": false,
        "type": "integer",
        "min": 1,
        "max": 1440,
        "description": "R√©p√©tition du message (minutes)"
      },
      "deadline": {
        "required": false,
        "type": "integer",
        "min": 1,
        "max": 10080,
        "description": "Compte √† rebours (minutes)"
      },
      "onconnect": {
        "required": false,
        "type": "boolean_int",
        "values": [0, 1],
        "default": 0,
        "description": "D√©clench√© √† la connexion joueur"
      },
      "shutdown": {
        "required": false,
        "type": "boolean_int",
        "values": [0, 1],
        "default": 0,
        "description": "Arr√™te le serveur apr√®s deadline"
      }
    }
  },
  
  "validation_rules": {
    "text_required": {
      "description": "La balise <text> est obligatoire",
      "error_message_fr": "Message sans balise <text>. Chaque message doit contenir du texte.",
      "severity": "error"
    },
    "placeholder_without_deadline": {
      "description": "Placeholder #tmin/#tsec sans deadline",
      "error_message_fr": "Message utilise #tmin ou #tsec mais n'a pas de <deadline>. Ces placeholders n√©cessitent un compte √† rebours.",
      "severity": "error"
    },
    "shutdown_without_deadline": {
      "description": "shutdown=1 sans deadline",
      "error_message_fr": "Message avec shutdown='1' mais sans <deadline>. Un shutdown n√©cessite un compte √† rebours.",
      "severity": "error"
    },
    "negative_value": {
      "description": "Valeur n√©gative d√©tect√©e",
      "error_message_fr": "Balise '{tag}': valeur n√©gative ({value}). Les timers doivent √™tre positifs.",
      "severity": "error"
    },
    "onconnect_invalid_value": {
      "description": "onconnect doit √™tre 0 ou 1",
      "error_message_fr": "onconnect doit √™tre 0 ou 1, actuellement : {value}",
      "severity": "error"
    },
    "shutdown_invalid_value": {
      "description": "shutdown doit √™tre 0 ou 1",
      "error_message_fr": "shutdown doit √™tre 0 ou 1, actuellement : {value}",
      "severity": "error"
    },
    "repeat_too_short": {
      "description": "repeat < 10 minutes (spam)",
      "error_message_fr": "Message avec repeat={value} minutes. Valeur < 10 peut spammer les joueurs. Recommand√© : ‚â• 15 minutes.",
      "severity": "warning"
    },
    "deadline_with_shutdown_warning": {
      "description": "deadline sans shutdown explicite",
      "error_message_fr": "Message avec <deadline> mais sans <shutdown> explicite. Le serveur va-t-il s'arr√™ter ou est-ce juste informatif ?",
      "severity": "info"
    },
    "text_too_long": {
      "description": "Texte tr√®s long (> 200 caract√®res)",
      "error_message_fr": "Message de {length} caract√®res. Les messages longs (> 200) peuvent √™tre tronqu√©s in-game.",
      "severity": "warning"
    }
  },
  
  "common_patterns": {
    "welcome_message": {
      "description": "Message de bienvenue √† la connexion",
      "example": {
        "onconnect": 1,
        "text": "Bienvenue sur #name !"
      }
    },
    "delayed_rules": {
      "description": "R√®gles affich√©es apr√®s X minutes",
      "example": {
        "delay": 2,
        "onconnect": 1,
        "text": "R√®gles du serveur : ..."
      }
    },
    "periodic_reminder": {
      "description": "Rappel p√©riodique (Discord, site, etc.)",
      "example": {
        "repeat": 30,
        "text": "Rejoignez notre Discord : ..."
      }
    },
    "scheduled_restart": {
      "description": "Restart automatique programm√©",
      "example": {
        "deadline": 1440,
        "shutdown": 1,
        "text": "#name red√©marrera dans #tmin minutes"
      }
    },
    "event_countdown": {
      "description": "Compte √† rebours √©v√©nement (sans shutdown)",
      "example": {
        "deadline": 120,
        "text": "√âv√©nement PvP dans #tmin minutes !"
      }
    },
    "onconnect_with_repeat": {
      "description": "Message √† la connexion puis r√©p√©t√©",
      "example": {
        "delay": 5,
        "repeat": 60,
        "onconnect": 1,
        "text": "Site web : www.exemple.com"
      }
    }
  },
  
  "common_errors": {
    "messages_not_showing": {
      "symptom": "Messages n'apparaissent pas in-game",
      "causes": [
        "Syntaxe XML invalide",
        "Fichier mal encod√© (pas UTF-8)",
        "Balise <text> manquante"
      ],
      "solution": "Valider la syntaxe XML et l'encodage UTF-8"
    },
    "server_not_shutting_down": {
      "symptom": "Serveur ne s'arr√™te pas apr√®s deadline",
      "cause": "<shutdown>1</shutdown> manquant",
      "solution": "Ajouter <shutdown>1</shutdown> au message"
    },
    "spam_players": {
      "symptom": "Joueurs se plaignent de spam",
      "cause": "<repeat> trop court (< 10 minutes)",
      "solution": "Augmenter repeat √† 20-30 minutes minimum"
    },
    "accents_broken": {
      "symptom": "Accents affich√©s incorrectement",
      "cause": "Encodage incorrect du fichier",
      "solution": "Sauvegarder en UTF-8 avec BOM"
    }
  },
  
  "best_practices": {
    "do": [
      "Utiliser UTF-8 pour les accents",
      "Messages courts (< 100 caract√®res)",
      "repeat ‚â• 15 minutes pour √©viter spam",
      "S√©quence de bienvenue progressive (imm√©diat, +2min, +10min)",
      "Pr√©voir restarts automatiques avec deadline + shutdown"
    ],
    "dont": [
      "repeat < 10 minutes (spam)",
      "Messages > 200 caract√®res (tronqu√©s)",
      "Trop de messages simultan√©s (> 10)",
      "Placeholders #tmin/#tsec sans deadline",
      "Oublier shutdown=1 pour les restarts automatiques"
    ]
  },
  
  "tips": {
    "general": [
      "Les messages peuvent inclure des emojis (üí¨, ‚ö†Ô∏è, etc.)",
      "Tester l'affichage in-game apr√®s modifications",
      "Fichier peut √™tre hot-reload (pas de restart n√©cessaire selon version)"
    ],
    "timing": [
      "delay = d√©lai AVANT le premier affichage",
      "repeat = r√©p√©tition P√âRIODIQUE",
      "deadline = compte √† rebours D√âCROISSANT"
    ],
    "placeholders": [
      "#name remplac√© par le nom du serveur",
      "#tmin pour minutes restantes (deadline requis)",
      "#tsec pour secondes restantes (deadline requis)"
    ]
  },
  
  "example_configs": {
    "minimal": {
      "description": "Configuration minimale (bienvenue + restart)",
      "messages": [
        {
          "onconnect": 1,
          "text": "Bienvenue sur #name !"
        },
        {
          "deadline": 1440,
          "shutdown": 1,
          "text": "#name red√©marrera dans #tmin minutes"
        }
      ]
    },
    "community_server": {
      "description": "Serveur communautaire complet",
      "messages": [
        {
          "onconnect": 1,
          "text": "Bienvenue sur #name"
        },
        {
          "delay": 2,
          "onconnect": 1,
          "text": "R√®gles : www.exemple.com/regles"
        },
        {
          "repeat": 30,
          "text": "Discord : discord.gg/EXAMPLE"
        },
        {
          "deadline": 720,
          "shutdown": 1,
          "text": "Restart dans #tmin min"
        }
      ]
    }
  }
}
